#!/usr/bin/env ruby
require 'curses'
require File.expand_path('../../lib/rfd', __FILE__)

Curses.cbreak
Curses.noecho
Curses.init_screen
Curses.start_color

begin
  rfd = Rfd::BaseWindow.new ARGV[0] || '.'

  loop do
    c = Curses.getch
    rfd.debug "getch: #{c}"
    case c
    when 27  # esc
      rfd.q
    when (?a)..(?z)
      rfd.public_send c if rfd.respond_to? c
    else
      p c
    end
  end
ensure
  Curses.close_screen
end
